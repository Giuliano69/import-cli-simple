{
  "magento-edition": "CE",
  "magento-version": "2.1.2",
  "operation-name" : "add-update",
  "installation-dir" : "/var/www/magento",
  "source-dir": "projects/sample-data/tmp",
  "target-dir": "projects/sample-data/tmp",
  "source-date-format": "n/d/y, g:i A",
  "archive-artefacts" : false,
  "archive-dir" : "archive",
  "utility-class-name" : "TechDivision\\Import\\Utils\\SqlStatements",
  "debug-mode" : false,
  "ignore-pid" : false,
  "entity-type-code" : "catalog_product",
  "databases": [
    {
      "id": "ce",
      "default": false,
      "pdo-dsn": "mysql:host=127.0.0.1;dbname=appserver_magento2_ce212;charset=utf8",
      "username": "appserver",
      "password": "appserver.i0"
    }
  ],
  "loggers": [
    {
      "name": "mail",
      "channel-name" : "logger/mail",
      "type" : "Monolog\\Logger",
      "handlers" : [
        {
          "type": "Monolog\\Handler\\SwiftMailerHandler",
          "params" : [
            {
              "log-level" : "error",
              "bubble" : false
            }
          ],
          "swift-mailer" : {
            "factory" : "TechDivision\\Import\\Utils\\SwiftMailer\\SendmailTransportMailerFactory",
            "mailer-factory" : "\\Swift_Mailer",
            "params" : [
              {
                "to" : "tw@appserver.io",
                "from" : "tw@appserver.io",
                "subject": "Importer Error",
                "content-type" : "text/plain"
              }
            ],
            "transport" : {
              "transport-factory" : "\\Swift_SendmailTransport"
            }
          }
        }
      ]
    }
  ],
  "operations" : [
    {
      "name" : "delete",
      "plugins" : [
        {
          "class-name": "import.plugin.global.data"
        },
        {
          "class-name": "import.plugin.subject",
          "subjects" : [
            {
              "class-name": "TechDivision\\Import\\Subjects\\MoveFilesSubject",
              "identifier": "move-files",
              "prefix": "magento-import",
              "ok-file-needed": true
            },
            {
              "class-name": "TechDivision\\Import\\Product\\Subjects\\BunchSubject",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductBunchProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Utils\\SqlStatements",
              "identifier": "files",
              "prefix": "magento-import",
              "observers": [
                {
                  "import": [
                    "TechDivision\\Import\\Product\\Observers\\ClearProductObserver"
                  ]
                }
              ]
            }
          ]
        },
        {
          "class-name": "TechDivision\\Import\\Plugins\\ArchivePlugin"
        }
      ]
    },
    {
      "name" : "replace",
      "plugins" : [
        {
          "class-name": "import.plugin.global.data"
        },
        {
          "class-name": "import.plugin.subject",
          "subjects": [
            {
              "class-name": "import.subject.move.files",
              "identifier": "move-files",
              "prefix": "magento-import",
              "ok-file-needed": true
            },
            {
              "class-name": "import_product.subject.bunch",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductBunchProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Utils\\SqlStatements",
              "identifier": "files",
              "prefix": "magento-import",
              "observers": [
                {
                  "pre-import": [
                    "TechDivision\\Import\\Product\\Observers\\PreLoadEntityIdObserver",
                    "TechDivision\\Import\\Product\\Observers\\ClearProductObserver",
                    "TechDivision\\Import\\Observers\\AttributeSetObserver",
                    "TechDivision\\Import\\Observers\\AdditionalAttributeObserver",
                    "TechDivision\\Import\\Product\\Observers\\UrlKeyObserver",
                    "TechDivision\\Import\\Product\\Observers\\QuantityAndStockStatusObserver"
                  ]
                },
                {
                  "import": [
                    "TechDivision\\Import\\Product\\Observers\\ProductObserver",
                    "TechDivision\\Import\\Product\\Observers\\ProductWebsiteObserver",
                    "TechDivision\\Import\\Product\\Observers\\CategoryProductObserver",
                    "TechDivision\\Import\\Product\\Observers\\ProductInventoryObserver",
                    "TechDivision\\Import\\Product\\Observers\\UrlRewriteObserver",
                    "TechDivision\\Import\\Product\\Observers\\ProductAttributeObserver",
                    "TechDivision\\Import\\Product\\Variant\\Observers\\ProductVariantObserver",
                    "TechDivision\\Import\\Product\\Bundle\\Observers\\ProductBundleObserver",
                    "TechDivision\\Import\\Product\\Media\\Observers\\ProductMediaObserver",
                    "TechDivision\\Import\\Product\\Link\\Observers\\ProductLinkObserver"
                  ]
                },
                {
                  "post-import": [
                    "TechDivision\\Import\\Product\\Observers\\CleanUpObserver"
                  ]
                }
              ]
            },
            {
              "class-name": "import_product_variant.subject.variant",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductVariantProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Variant\\Utils\\SqlStatements",
              "prefix": "variants",
              "observers": [
                {
                  "pre-import": [
                    "TechDivision\\Import\\Observers\\AttributeSetObserver"
                  ]
                },
                {
                  "import": [
                    "TechDivision\\Import\\Product\\Variant\\Observers\\VariantObserver",
                    "TechDivision\\Import\\Product\\Variant\\Observers\\VariantSuperAttributeObserver"
                  ]
                }
              ]
            },
            {
              "class-name": "import_product_bundle.subject.bundle",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductBundleProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Bundle\\Utils\\SqlStatements",
              "prefix": "bundles",
              "observers": [
                {
                  "import": [
                    "TechDivision\\Import\\Product\\Bundle\\Observers\\BundleOptionObserver",
                    "TechDivision\\Import\\Product\\Bundle\\Observers\\BundleOptionValueObserver",
                    "TechDivision\\Import\\Product\\Bundle\\Observers\\BundleSelectionObserver",
                    "TechDivision\\Import\\Product\\Bundle\\Observers\\BundleSelectionPriceObserver"
                  ]
                }
              ]
            },
            {
              "class-name": "import_product_media.subject.media",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductMediaProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Media\\Utils\\SqlStatements",
              "prefix": "media",
              "params" : [
                {
                  "copy-images" : true,
                  "root-directory" : "/",
                  "media-directory" : "/opt/appserver/webapps/magento2_ce212/pub/media/catalog/product",
                  "images-file-directory" : "projects/sample-data/magento2-sample-data/pub/media/catalog/product"
                }
              ],
              "observers": [
                {
                  "pre-import" : [
                    "TechDivision\\Import\\Product\\Media\\Observers\\FileUploadObserver"
                  ],
                  "import": [
                    "TechDivision\\Import\\Product\\Media\\Observers\\MediaGalleryObserver",
                    "TechDivision\\Import\\Product\\Media\\Observers\\MediaGalleryValueObserver"
                  ]
                }
              ]
            },
            {
              "class-name": "mport_product_link.subject.link",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductLinkProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Link\\Utils\\SqlStatements",
              "prefix": "links",
              "observers": [
                {
                  "import": [
                    "TechDivision\\Import\\Product\\Link\\Observers\\LinkObserver",
                    "TechDivision\\Import\\Product\\Link\\Observers\\LinkAttributePositionObserver"
                  ]
                }
              ]
            }
          ]
        },
        {
          "class-name": "import.plugin.missing.option.values",
          "swift-mailer" : {
            "factory" : "TechDivision\\Import\\Utils\\SwiftMailer\\SendmailTransportMailerFactory",
            "mailer-factory" : "\\Swift_Mailer",
            "params" : [
              {
                "to" : "tw@appserver.io",
                "from" : "tw@appserver.io",
                "subject": "Importer Error",
                "content-type" : "text/plain"
              }
            ],
            "transport" : {
              "transport-factory" : "\\Swift_SendmailTransport"
            }
          }
        },
        {
          "class-name": "import.plugin.archive"
        }
      ]
    },
    {
      "name" : "add-update",
      "plugins" : [
        {
          "class-name": "import.plugin.global.data"
        },
        {
          "class-name": "import.plugin.subject",
          "subjects": [
            {
              "class-name": "import.subject.move.files",
              "identifier": "move-files",
              "prefix": "magento-import",
              "ok-file-needed": true
            },
            {
              "class-name": "import_product.subject.bunch",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductBunchProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Utils\\SqlStatements",
              "identifier": "files",
              "prefix": "magento-import",
              "observers": [
                {
                  "pre-import": [
                    "TechDivision\\Import\\Observers\\AttributeSetObserver",
                    "TechDivision\\Import\\Observers\\AdditionalAttributeObserver",
                    "TechDivision\\Import\\Product\\Observers\\UrlKeyObserver",
                    "TechDivision\\Import\\Product\\Observers\\QuantityAndStockStatusObserver"
                  ]
                },
                {
                  "import": [
                    "TechDivision\\Import\\Product\\Observers\\ProductUpdateObserver",
                    "TechDivision\\Import\\Product\\Observers\\ProductWebsiteUpdateObserver",
                    "TechDivision\\Import\\Product\\Observers\\CategoryProductUpdateObserver",
                    "TechDivision\\Import\\Product\\Observers\\ProductInventoryUpdateObserver",
                    "TechDivision\\Import\\Product\\Observers\\UrlRewriteUpdateObserver",
                    "TechDivision\\Import\\Product\\Observers\\ProductAttributeUpdateObserver",
                    "TechDivision\\Import\\Product\\Variant\\Observers\\ProductVariantObserver",
                    "TechDivision\\Import\\Product\\Bundle\\Observers\\ProductBundleObserver",
                    "TechDivision\\Import\\Product\\Media\\Observers\\ProductMediaObserver",
                    "TechDivision\\Import\\Product\\Link\\Observers\\ProductLinkObserver"
                  ]
                },
                {
                  "post-import": [
                    "TechDivision\\Import\\Product\\Observers\\CleanUpObserver"
                  ]
                }
              ]
            },
            {
              "class-name": "import_product_variant.subject.variant",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductVariantProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Variant\\Utils\\SqlStatements",
              "prefix": "variants",
              "observers": [
                {
                  "pre-import": [
                    "TechDivision\\Import\\Observers\\AttributeSetObserver"
                  ]
                },
                {
                  "import": [
                    "TechDivision\\Import\\Product\\Variant\\Observers\\VariantUpdateObserver",
                    "TechDivision\\Import\\Product\\Variant\\Observers\\VariantSuperAttributeUpdateObserver"
                  ]
                }
              ]
            },
            {
              "class-name": "import_product_bundle.subject.bundle",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductBundleProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Bundle\\Utils\\SqlStatements",
              "prefix": "bundles",
              "observers": [
                {
                  "import": [
                    "TechDivision\\Import\\Product\\Bundle\\Observers\\BundleOptionUpdateObserver",
                    "TechDivision\\Import\\Product\\Bundle\\Observers\\BundleOptionValueUpdateObserver",
                    "TechDivision\\Import\\Product\\Bundle\\Observers\\BundleSelectionUpdateObserver",
                    "TechDivision\\Import\\Product\\Bundle\\Observers\\BundleSelectionPriceUpdateObserver"
                  ]
                }
              ]
            },
            {
              "class-name": "import_product_media.subject.media",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductMediaProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Media\\Utils\\SqlStatements",
              "prefix": "media",
              "params" : [
                {
                  "copy-images" : true,
                  "root-directory" : "/",
                  "media-directory" : "/opt/appserver/webapps/magento2_ce212/pub/media/catalog/product",
                  "images-file-directory" : "projects/sample-data/magento2-sample-data/pub/media/catalog/product"
                }
              ],
              "observers": [
                {
                  "pre-import" : [
                    "TechDivision\\Import\\Product\\Media\\Observers\\FileUploadObserver"
                  ],
                  "import": [
                    "TechDivision\\Import\\Product\\Media\\Observers\\MediaGalleryUpdateObserver",
                    "TechDivision\\Import\\Product\\Media\\Observers\\MediaGalleryValueUpdateObserver"
                  ]
                }
              ]
            },
            {
              "class-name": "import_product_link.subject.link",
              "processor-factory" : "TechDivision\\Import\\Cli\\Services\\ProductLinkProcessorFactory",
              "utility-class-name" : "TechDivision\\Import\\Product\\Link\\Utils\\SqlStatements",
              "prefix": "links",
              "observers": [
                {
                  "import": [
                    "TechDivision\\Import\\Product\\Link\\Observers\\LinkUpdateObserver",
                    "TechDivision\\Import\\Product\\Link\\Observers\\LinkAttributePositionUpdateObserver"
                  ]
                }
              ]
            }
          ]
        },
        {
          "class-name": "import.plugin.missing.option.values",
          "swift-mailer" : {
            "factory" : "TechDivision\\Import\\Utils\\SwiftMailer\\SendmailTransportMailerFactory",
            "mailer-factory" : "\\Swift_Mailer",
            "params" : [
              {
                "to" : "tw@appserver.io",
                "from" : "tw@appserver.io",
                "subject": "Missing Option Values",
                "content-type" : "text/plain"
              }
            ],
            "transport" : {
              "transport-factory" : "\\Swift_SendmailTransport"
            }
          }
        },
        {
          "class-name": "import.plugin.archive"
        }
      ]
    }
  ]
}